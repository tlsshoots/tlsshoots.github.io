{"ast":null,"code":"import _regeneratorRuntime from \"/Users/wellingtonvicioso/tlsshoots.github.io/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/wellingtonvicioso/tlsshoots.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/wellingtonvicioso/tlsshoots.github.io/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wellingtonvicioso/tlsshoots.github.io/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wellingtonvicioso/tlsshoots.github.io/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wellingtonvicioso/tlsshoots.github.io/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wellingtonvicioso/tlsshoots.github.io/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wellingtonvicioso/tlsshoots.github.io/src/components/admin.js\";\nimport React, { Component } from 'react';\nimport ImageLoader from 'react-loading-image';\nimport Loader from 'react-loader-spinner';\nimport S3 from 'aws-s3'; // import S3 from './aws-s3/src/S3Client';\n// import S3Client from 'aws-s3';\n\nimport logo from '../TLSLogo.png';\nimport img from '../tls-camera.jpg';\nimport '../Admin.css';\nimport awsKey from '../config.js'; // const config = {\n//     bucketName: 'myBucket',\n//     dirName: 'photos', /* optional */\n//     region: 'eu-west-1',\n//     accessKeyId: 'ANEIFNENI4324N2NIEXAMPLE',\n//     secretAccessKey: 'cms21uMxçduyUxYjeg20+DEkgDxe6veFosBT7eUgEXAMPLE',\n//     s3Url: 'https://my-s3-url.com/', /* optional */\n// }\n\nvar width = window.innerWidth;\nvar height = window.innerHeight;\n\nvar Admin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Admin, _Component);\n\n  function Admin() {\n    var _this2;\n\n    _classCallCheck(this, Admin);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(Admin).call(this));\n\n    _this2.handleAdminChangeText = function (e) {\n      _this2.setState({\n        adminPass: e.target.value\n      });\n    };\n\n    _this2.handleChangeText = function (e) {\n      _this2.setState({\n        albumTitleInput: e.target.value\n      });\n    };\n\n    _this2.selectImage = function (e) {\n      var element = document.getElementsByClassName(\"selectedImg\")[0];\n\n      if (element) {\n        element.classList.remove(\"selectedImg\");\n        element.style.display = 'none';\n      }\n\n      var childrenElem = e.target.closest(\".fileItem\").children;\n      childrenElem[childrenElem.length - 1].classList.add(\"selectedImg\");\n      childrenElem[childrenElem.length - 1].style.display = 'flex';\n    };\n\n    _this2.state = {\n      albums: {},\n      activeAlbumIdx: 0,\n      activeAlbum: {},\n      albumTitle: 'No Album Selected',\n      albumTitleInput: '',\n      totalNumberOfImages: 0,\n      counter: 0,\n      uploading: false,\n      files: [],\n      awsFiles: [],\n      newFiles: false,\n      logged: true,\n      adminPass: ''\n    };\n    return _this2;\n  }\n\n  _createClass(Admin, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getAlbums();\n    }\n  }, {\n    key: \"verifyUser\",\n    value: function verifyUser() {\n      if (this.state.adminPass == \"M!ch3ll3S\") {\n        this.setState({\n          logged: true\n        });\n      } else {\n        alert('wrong password');\n      }\n    }\n  }, {\n    key: \"getAlbums\",\n    value: function () {\n      var _getAlbums = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                fetch('https://enigmatic-lake-22259.herokuapp.com/albums', {\n                  method: 'GET',\n                  mode: 'cors',\n                  headers: {\n                    'Access-Control-Allow-Origin': '*',\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json'\n                  }\n                }).then(function (response) {\n                  return response.json();\n                }).then(function (responseJson) {\n                  var sortedResp = responseJson.map(function (obj) {\n                    var result = {\n                      album: obj.album,\n                      images: obj.images.reverse()\n                    };\n                    return result;\n                  });\n\n                  _this3.setState({\n                    albums: sortedResp.reverse()\n                  });\n\n                  console.log('=====API GET=====', sortedResp);\n                }).catch(function (error) {\n                  console.log('=====API error=====', error);\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function getAlbums() {\n        return _getAlbums.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"selectAlbum\",\n    value: function selectAlbum(albumIdx) {\n      this.clearEditor();\n      var album = this.state.albums[albumIdx];\n      this.setState({\n        activeAlbumIdx: albumIdx,\n        activeAlbum: album,\n        albumTitle: album.album.title,\n        totalNumberOfImages: album.images.length\n      });\n    }\n  }, {\n    key: \"updateAlbumTitle\",\n    value: function updateAlbumTitle() {\n      var _this4 = this;\n\n      if (this.state.newFiles || !this.state.activeAlbum.album) {\n        alert(\"button not active\");\n        return;\n      }\n\n      if (!this.state.albumTitleInput) {\n        alert('No album title');\n        return;\n      }\n\n      if (window.confirm('Are you sure you want to change the Album title?')) {\n        fetch(\"https://enigmatic-lake-22259.herokuapp.com/albums/\".concat(this.state.activeAlbum.album.id), {\n          method: 'PUT',\n          mode: 'cors',\n          headers: {\n            'Access-Control-Allow-Origin': '*',\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            title: this.state.albumTitleInput\n          })\n        }).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          var _this = _this4;\n\n          _this4.setState({\n            albumTitleInput: ''\n          });\n\n          _this4.getAlbums();\n\n          setTimeout(function () {\n            _this.selectAlbum(_this.state.activeAlbumIdx);\n          }, 2000);\n          console.log('=====API GET setCover=====', responseJson);\n        }).catch(function (error) {\n          console.log('=====API error setCover=====', error);\n        });\n      }\n    }\n  }, {\n    key: \"updateAlbumCover\",\n    value: function updateAlbumCover(imgObj) {\n      var _this5 = this;\n\n      if (window.confirm('Are you sure you want to change the cover image?')) {\n        fetch(\"https://enigmatic-lake-22259.herokuapp.com/albums/\".concat(this.state.activeAlbum.album.id), {\n          method: 'PUT',\n          mode: 'cors',\n          headers: {\n            'Access-Control-Allow-Origin': '*',\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            cover: this.state.activeAlbum.images.indexOf(imgObj)\n          })\n        }).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          var _this = _this5;\n\n          _this5.getAlbums();\n\n          setTimeout(function () {\n            _this.selectAlbum(_this.state.activeAlbumIdx);\n          }, 2000);\n          console.log('=====API GET setCover=====', responseJson);\n        }).catch(function (error) {\n          console.log('=====API error setCover=====', error);\n        });\n      }\n    }\n  }, {\n    key: \"selectNewAlbum\",\n    value: function selectNewAlbum(e) {\n      this.clearEditor();\n      var obj = e.target.files;\n      var objArr = [];\n      var keys = Object.keys(obj);\n      keys.sort(function (a, b) {\n        return parseInt(obj[a].name.split('-')[0]) - parseInt(obj[b].name.split('-')[0]);\n      });\n      keys.forEach(function (k) {\n        if (obj[k].name.split(\".\")[1] === \"jpg\" || obj[k].name.split(\".\")[1] === \"JPG\" || obj[k].name.split(\".\")[1] === \"jpeg\" || obj[k].name.split(\".\")[1] === \"PNG\" || obj[k].name.split(\".\")[1] === \"png\") {\n          objArr.push(obj[k]);\n        }\n      });\n      this.setState({\n        files: objArr,\n        albumTitle: 'New Album',\n        newFiles: true\n      });\n    }\n  }, {\n    key: \"uploadNewAlbumS3\",\n    value: function uploadNewAlbumS3() {\n      var _this6 = this;\n\n      if (!this.state.newFiles) {\n        alert(\"button not active\");\n        return;\n      }\n\n      if (!this.state.albumTitleInput) {\n        alert('No album title');\n        return;\n      }\n\n      var config = {\n        bucketName: 'tlsshootspics',\n        dirName: this.state.albumTitleInput,\n        region: 'us-east-1',\n        accessKeyId: awsKey.access,\n        secretAccessKey: awsKey.secret,\n        s3Url: 'https://tlsshootspics.s3.amazonaws.com' //     const config = {\n        //     bucketName: 'myBucket',\n        //     dirName: 'photos', /* optional */\n        //     region: 'eu-west-1',\n        //     accessKeyId: 'ANEIFNENI4324N2NIEXAMPLE',\n        //     secretAccessKey: 'cms21uMxçduyUxYjeg20+DEkgDxe6veFosBT7eUgEXAMPLE',\n        //     s3Url: 'https://my-s3-url.com/', /* optional */\n        // }\n        // console.log('config.accessKeyId', config.accessKeyId)\n        // console.log('config.accessKeyId', config.secret)\n        // debugger\n        // console.log('S3', S3)\n\n      };\n      var S3Client = new S3(config); // console.log('S3Client', S3Client)\n\n      var imgLinks = [];\n\n      if (window.confirm('Are you sure you want to upload this album?')) {\n        this.uploading();\n\n        for (var i = 0; i < this.state.files.length; i++) {\n          S3Client.uploadFile(this.state.files[i], this.state.files[i].name.split(\".\")[0]).then(function (data) {\n            imgLinks.push(data.location);\n            var counter = _this6.state.counter;\n\n            _this6.setState({\n              counter: counter += 1\n            });\n\n            if (_this6.state.counter === _this6.state.files.length) {\n              _this6.setState({\n                awsFiles: imgLinks\n              }); // this.setActiveGallery({images: imgLinks, title:this.state.galleryTitle})\n              // API REQUEST TO SAVE AND UPDATE ALBUM\n\n\n              _this6.uploadNewAlbumServer();\n            } // if (i === this.state.files.length - 1) {\n            // }\n\n\n            _this6.uploading();\n          }).catch(function (err) {\n            console.log('error uploading', err);\n          });\n        }\n      }\n    }\n  }, {\n    key: \"uploadNewAlbumServer\",\n    value: function uploadNewAlbumServer() {\n      var _this7 = this;\n\n      console.log('======here LLL======', this.state.awsFiles);\n      var location = this.state.awsFiles[0].split('/')[3];\n      fetch(\"https://enigmatic-lake-22259.herokuapp.com/albums\", {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          album: {\n            title: this.state.albumTitleInput,\n            cover: 0,\n            awsLocation: location,\n            images: this.state.awsFiles\n          }\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        var _this = _this7;\n\n        _this7.getAlbums();\n\n        setTimeout(function () {\n          _this.selectAlbum(_this.state.albums.length - 1);\n        }, 2000);\n        console.log('=====API GET setCover=====', responseJson);\n      }).catch(function (error) {\n        console.log('=====API error setCover=====', error);\n      });\n    }\n  }, {\n    key: \"deleteAlbumS3\",\n    value: function deleteAlbumS3() {\n      var _this8 = this;\n\n      if (this.state.newFiles || !this.state.activeAlbum.album) {\n        alert(\"button not active\");\n        return;\n      }\n\n      if (window.confirm('Are you sure you want to delete this album?')) {\n        this.uploading();\n        var config = {\n          bucketName: 'tlsshootspics',\n          dirName: this.state.activeAlbum.album.awsLocation,\n          accessKeyId: awsKey.access,\n          secretAccessKey: awsKey.secret\n        };\n        var S3Client = new S3(config);\n\n        var _loop = function _loop() {\n          var filename = _this8.state.activeAlbum.images[i].url.split(\"/\")[4];\n\n          var num = i;\n          S3Client.deleteFile(filename).then(function (response) {}).catch(function (err) {\n            return console.error(err);\n          });\n          fetch(\"https://enigmatic-lake-22259.herokuapp.com/images/\".concat(_this8.state.activeAlbum.images[i].id), {\n            method: 'DELETE',\n            mode: 'cors',\n            headers: {\n              'Access-Control-Allow-Origin': '*',\n              Accept: 'application/json',\n              'Content-Type': 'application/json'\n            }\n          }).then(function (response) {\n            return response.json();\n          }).then(function (responseJson) {\n            var counter = _this8.state.counter;\n\n            _this8.setState({\n              counter: counter += 1\n            });\n\n            _this8.uploading();\n\n            if (_this8.state.activeAlbum.images.length - 1 == num) {\n              console.log('this here', _this8.state);\n\n              _this8.deleteAlbumServer();\n            }\n\n            console.log('=====API DELETE', responseJson);\n          }).catch(function (error) {\n            console.log('=====API error', error);\n          });\n        };\n\n        for (var i = 0; i < this.state.activeAlbum.images.length; i++) {\n          _loop();\n        }\n      }\n    }\n  }, {\n    key: \"deleteAlbumServer\",\n    value: function deleteAlbumServer() {\n      var _this = this;\n\n      fetch(\"https://enigmatic-lake-22259.herokuapp.com/albums/\".concat(this.state.activeAlbum.album.id), {\n        method: 'DELETE',\n        mode: 'cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this.clearEditor();\n\n        _this.getAlbums();\n      }).catch(function (error) {\n        console.log('=====API error', error);\n      });\n    }\n  }, {\n    key: \"confirmAction\",\n    value: function confirmAction(action) {}\n  }, {\n    key: \"clearEditor\",\n    value: function clearEditor() {\n      this.setState({\n        activeAlbumIdx: 0,\n        activeAlbum: {},\n        albumTitle: 'No Album Selected',\n        albumTitleInput: '',\n        totalNumberOfImages: 0,\n        files: [],\n        newFiles: false\n      });\n    }\n  }, {\n    key: \"uploading\",\n    value: function uploading() {\n      if (this.state.newFiles) {\n        if (this.state.uploading && this.state.counter === this.state.files.length) {\n          this.setState({\n            uploading: false,\n            counter: 0\n          });\n        } else {\n          this.setState({\n            uploading: true\n          });\n        }\n      } else {\n        if (this.state.uploading && this.state.counter === this.state.activeAlbum.images.length) {\n          this.setState({\n            uploading: false,\n            counter: 0\n          });\n        } else {\n          this.setState({\n            uploading: true\n          });\n        }\n      }\n    }\n  }, {\n    key: \"renderAlbums\",\n    value: function renderAlbums() {\n      var albumsArr = [];\n      var albums = this.state.albums;\n      console.log('albums', albums);\n\n      for (var i = 0; i < albums.length; i++) {\n        albumsArr.push(React.createElement(\"div\", {\n          className: \"albumIcon\",\n          onClick: this.selectAlbum.bind(this, i),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 445\n          },\n          __self: this\n        }, React.createElement(ImageLoader, {\n          src: albums[i].images[albums[i].album.cover].url,\n          style: {\n            width: 150,\n            height: 150,\n            margin: 5\n          },\n          loading: function loading() {\n            return React.createElement(Loader, {\n              type: \"RevolvingDot\",\n              color: \"#616161\",\n              height: \"30\",\n              width: \"30\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 454\n              },\n              __self: this\n            });\n          },\n          error: function error() {\n            return React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 461\n              },\n              __self: this\n            }, \"Loading...\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 446\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"albumIconTitle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 463\n          },\n          __self: this\n        }, albums[i].album.title)));\n      }\n\n      return albumsArr;\n    }\n  }, {\n    key: \"renderActiveAlbumFiles\",\n    value: function renderActiveAlbumFiles() {\n      var filesArr = [];\n      var album = this.state.activeAlbum;\n\n      if (Object.keys(album).length !== 0) {\n        filesArr.push(React.createElement(\"div\", {\n          className: \"fileItem\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 475\n          },\n          __self: this\n        }, React.createElement(ImageLoader, {\n          src: album.images[album.album.cover].url,\n          style: {\n            width: 50,\n            height: 50\n          },\n          loading: function loading() {\n            return React.createElement(Loader, {\n              type: \"RevolvingDot\",\n              color: \"#616161\",\n              height: \"30\",\n              width: \"30\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 483\n              },\n              __self: this\n            });\n          },\n          error: function error() {\n            return React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 490\n              },\n              __self: this\n            }, \"Loading...\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 476\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 492\n          },\n          __self: this\n        }, album.images[album.album.cover].url.split('/')[album.images[album.album.cover].url.split('/').length - 1])));\n\n        for (var i = 0; i < album.images.length; i++) {\n          if (i !== album.album.cover) {\n            filesArr.push(React.createElement(\"div\", {\n              className: \"fileItem\",\n              onClick: this.selectImage.bind(this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 503\n              },\n              __self: this\n            }, React.createElement(ImageLoader, {\n              src: album.images[i].url,\n              style: {\n                width: 50,\n                height: 50\n              },\n              loading: function loading() {\n                return React.createElement(Loader, {\n                  type: \"RevolvingDot\",\n                  color: \"#616161\",\n                  height: \"30\",\n                  width: \"30\",\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 511\n                  },\n                  __self: this\n                });\n              },\n              error: function error() {\n                return React.createElement(\"div\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 518\n                  },\n                  __self: this\n                }, \"Loading...\");\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 504\n              },\n              __self: this\n            }), React.createElement(\"p\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 520\n              },\n              __self: this\n            }, album.images[i].url.split('/')[album.images[i].url.split('/').length - 1]), React.createElement(\"div\", {\n              className: \"setCoverBtn\",\n              onClick: this.updateAlbumCover.bind(this, album.images[i]),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 525\n              },\n              __self: this\n            }, React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 525\n              },\n              __self: this\n            }, \"set as cover\"))));\n          }\n        }\n      } else if (this.state.files.length !== 0) {\n        for (var int = 0; int < this.state.files.length; int++) {\n          filesArr.push(React.createElement(\"div\", {\n            className: \"fileItem\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 533\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 534\n            },\n            __self: this\n          }, \" \", this.state.files[int].name, \" \")));\n        }\n      }\n\n      return filesArr;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.logged) {\n        return React.createElement(\"div\", {\n          className: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 546\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 547\n          },\n          __self: this\n        }, \"Admin\"), React.createElement(\"div\", {\n          className: \"bodyContainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 551\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"rightContainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 553\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"actionsContainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 555\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 556\n          },\n          __self: this\n        }, \"Actions\"), React.createElement(\"div\", {\n          className: \"actionsWrapper\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 557\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"btn\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 558\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 558\n          },\n          __self: this\n        }, \"upload album\"), React.createElement(\"input\", {\n          className: \"fileInput\",\n          type: \"file\",\n          name: \"New Gallery\",\n          onChange: this.selectNewAlbum.bind(this),\n          multiple: \"\",\n          directory: \"\",\n          webkitdirectory: \"\",\n          mozdirectory: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 559\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"btn\",\n          onClick: this.updateAlbumTitle.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 561\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 561\n          },\n          __self: this\n        }, \"update title\")), React.createElement(\"div\", {\n          className: \"btn\",\n          onClick: this.clearEditor.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 562\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 562\n          },\n          __self: this\n        }, \"clear editor\")), React.createElement(\"div\", {\n          className: \"btn\",\n          onClick: this.uploadNewAlbumS3.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 563\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 563\n          },\n          __self: this\n        }, \"publish album\")), React.createElement(\"div\", {\n          className: \"btn\",\n          onClick: this.deleteAlbumS3.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 564\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 564\n          },\n          __self: this\n        }, \"delete album\")))), React.createElement(\"div\", {\n          className: \"editorContainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 568\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 570\n          },\n          __self: this\n        }, \"Album Editor - \", React.createElement(\"strong\", {\n          style: {\n            fontWeight: '900',\n            color: '#d4ae93'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 570\n          },\n          __self: this\n        }, this.state.albumTitle), \" \"), React.createElement(\"input\", {\n          onChange: this.handleChangeText.bind(this),\n          value: this.state.albumTitleInput,\n          placeholder: \"Update Album Title\",\n          type: \"text\",\n          className: \"titleInput\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 571\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"filesContainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 573\n          },\n          __self: this\n        }, this.renderActiveAlbumFiles()))), React.createElement(\"div\", {\n          className: \"albumsContainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 579\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 580\n          },\n          __self: this\n        }, \"Stored Albums\"), React.createElement(\"div\", {\n          className: \"albumIcons\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 581\n          },\n          __self: this\n        }, this.renderAlbums()))), this.state.uploading ? React.createElement(\"div\", {\n          style: {\n            color: '#fff',\n            fontSize: 42,\n            position: 'fixed',\n            top: 0,\n            bottom: 0,\n            left: 0,\n            right: 0,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            background: '#00000090'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 588\n          },\n          __self: this\n        }, this.state.newFiles ? \"uploaded\" : \"deleted\", \": \", this.state.counter, \"/\", this.state.newFiles ? this.state.files.length : this.state.activeAlbum.images.length) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 602\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 609\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"editorContainer\",\n          style: {\n            width: '95%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 610\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 612\n          },\n          __self: this\n        }, \"Admin Login\"), React.createElement(\"input\", {\n          value: this.state.adminPass,\n          type: \"password\",\n          onChange: this.handleAdminChangeText.bind(this),\n          placeholder: \"Enter Password\",\n          className: \"titleInput\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 613\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"btn\",\n          style: {\n            width: '20%'\n          },\n          onClick: this.verifyUser.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 615\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 615\n          },\n          __self: this\n        }, \"enter\"))));\n      }\n    }\n  }]);\n\n  return Admin;\n}(Component);\n\nexport default Admin;","map":{"version":3,"sources":["/Users/wellingtonvicioso/tlsshoots.github.io/src/components/admin.js"],"names":["React","Component","ImageLoader","Loader","S3","logo","img","awsKey","width","window","innerWidth","height","innerHeight","Admin","handleAdminChangeText","e","setState","adminPass","target","value","handleChangeText","albumTitleInput","selectImage","element","document","getElementsByClassName","classList","remove","style","display","childrenElem","closest","children","length","add","state","albums","activeAlbumIdx","activeAlbum","albumTitle","totalNumberOfImages","counter","uploading","files","awsFiles","newFiles","logged","getAlbums","alert","fetch","method","mode","headers","Accept","then","response","json","responseJson","sortedResp","map","obj","result","album","images","reverse","console","log","catch","error","albumIdx","clearEditor","title","confirm","id","body","JSON","stringify","_this","setTimeout","selectAlbum","imgObj","cover","indexOf","objArr","keys","Object","sort","a","b","parseInt","name","split","forEach","k","push","config","bucketName","dirName","region","accessKeyId","access","secretAccessKey","secret","s3Url","S3Client","imgLinks","i","uploadFile","data","location","uploadNewAlbumServer","err","awsLocation","filename","url","num","deleteFile","deleteAlbumServer","action","albumsArr","bind","margin","filesArr","updateAlbumCover","int","selectNewAlbum","updateAlbumTitle","uploadNewAlbumS3","deleteAlbumS3","fontWeight","color","renderActiveAlbumFiles","renderAlbums","fontSize","position","top","bottom","left","right","alignItems","justifyContent","background","verifyUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ImageLoader from 'react-loading-image'\nimport Loader from 'react-loader-spinner'\nimport S3 from 'aws-s3';\n// import S3 from './aws-s3/src/S3Client';\n\n// import S3Client from 'aws-s3';\nimport logo from '../TLSLogo.png';\nimport img from '../tls-camera.jpg'\nimport '../Admin.css';\nimport awsKey from '../config.js';\n\n\n// const config = {\n//     bucketName: 'myBucket',\n//     dirName: 'photos', /* optional */\n//     region: 'eu-west-1',\n//     accessKeyId: 'ANEIFNENI4324N2NIEXAMPLE',\n//     secretAccessKey: 'cms21uMxçduyUxYjeg20+DEkgDxe6veFosBT7eUgEXAMPLE',\n//     s3Url: 'https://my-s3-url.com/', /* optional */\n// }\n\n\nconst width = window.innerWidth;\nconst height = window.innerHeight;\n\nclass Admin extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      albums: {},\n      activeAlbumIdx: 0,\n      activeAlbum: {},\n      albumTitle: 'No Album Selected',\n      albumTitleInput: '',\n      totalNumberOfImages: 0,\n      counter: 0,\n      uploading: false,\n      files: [],\n      awsFiles: [],\n      newFiles: false,\n      logged: true,\n      adminPass : ''\n    }\n  }\n\n  componentDidMount() {\n    this.getAlbums();\n  }\n\n  verifyUser() {\n    if (this.state.adminPass == \"M!ch3ll3S\") {\n      this.setState({\n        logged: true\n      })\n    } else {\n      alert('wrong password')\n    }\n  }\n\n  async getAlbums() {\n    fetch('https://enigmatic-lake-22259.herokuapp.com/albums', {\n      method: 'GET',\n      mode: 'cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(response => response.json())\n    .then((responseJson) => {\n      let sortedResp = responseJson.map(obj => {\n        let result = {album: obj.album, images: obj.images.reverse()}\n        return result\n      })\n\n      this.setState({\n        albums: sortedResp.reverse()\n      })\n\n      console.log('=====API GET=====', sortedResp)\n    })\n    .catch(error => {\n      console.log('=====API error=====', error)\n    })\n  }\n\n  selectAlbum(albumIdx) {\n    this.clearEditor();\n    let album = this.state.albums[albumIdx]\n    this.setState({\n      activeAlbumIdx: albumIdx,\n      activeAlbum: album,\n      albumTitle: album.album.title,\n      totalNumberOfImages: album.images.length\n    })\n  }\n\n  updateAlbumTitle() {\n    if (this.state.newFiles || !this.state.activeAlbum.album) {\n      alert(\"button not active\");\n      return;\n    }\n    if (!this.state.albumTitleInput) {\n      alert('No album title');\n      return;\n    }\n    if(window.confirm('Are you sure you want to change the Album title?')) {\n      fetch(`https://enigmatic-lake-22259.herokuapp.com/albums/${this.state.activeAlbum.album.id}`, {\n        method: 'PUT',\n        mode: 'cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            title: this.state.albumTitleInput\n        })\n      })\n      .then(response => response.json())\n      .then((responseJson) => {\n        let _this = this\n        this.setState({ albumTitleInput: '' });\n        this.getAlbums();\n        setTimeout(function(){\n          _this.selectAlbum(_this.state.activeAlbumIdx);\n        }, 2000);\n        console.log('=====API GET setCover=====', responseJson)\n      })\n      .catch(error => {\n        console.log('=====API error setCover=====', error)\n      })\n    }\n\n  }\n\n  handleAdminChangeText = e => {\n    this.setState({\n      adminPass: e.target.value\n    })\n  }\n\n  handleChangeText = e => {\n    this.setState({\n      albumTitleInput: e.target.value\n    })\n  }\n\n  updateAlbumCover(imgObj) {\n    if(window.confirm('Are you sure you want to change the cover image?')) {\n      fetch(`https://enigmatic-lake-22259.herokuapp.com/albums/${this.state.activeAlbum.album.id}`, {\n        method: 'PUT',\n        mode: 'cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            cover: this.state.activeAlbum.images.indexOf(imgObj)\n        })\n      })\n      .then(response => response.json())\n      .then((responseJson) => {\n        let _this = this\n        this.getAlbums()\n        setTimeout(function(){\n          _this.selectAlbum(_this.state.activeAlbumIdx);\n        }, 2000);\n        console.log('=====API GET setCover=====', responseJson)\n      })\n      .catch(error => {\n        console.log('=====API error setCover=====', error)\n      })\n    }\n  }\n\n  selectNewAlbum(e) {\n    this.clearEditor();\n    let obj = e.target.files\n    let objArr = [];\n\n    let keys = Object.keys(obj);\n\n    keys.sort(function(a, b) {\n        return parseInt(obj[a].name.split('-')[0]) - parseInt(obj[b].name.split('-')[0])\n    });\n\n    keys.forEach(function(k) {\n      if (obj[k].name.split(\".\")[1] === \"jpg\" ||\n          obj[k].name.split(\".\")[1] === \"JPG\" ||\n          obj[k].name.split(\".\")[1] === \"jpeg\"||\n          obj[k].name.split(\".\")[1] === \"PNG\" ||\n          obj[k].name.split(\".\")[1] === \"png\") {\n        objArr.push(obj[k]);\n      }\n    });\n\n\n    this.setState({\n      files: objArr,\n      albumTitle: 'New Album',\n      newFiles: true\n    })\n  }\n\n  selectImage = e => {\n    let element = document.getElementsByClassName(\"selectedImg\")[0];\n    if (element) {\n      element.classList.remove(\"selectedImg\");\n      element.style.display = 'none'\n    }\n\n    let childrenElem = e.target.closest(\".fileItem\").children\n\n    childrenElem[childrenElem.length - 1].classList.add(\"selectedImg\");\n    childrenElem[childrenElem.length - 1].style.display = 'flex';\n  }\n\n  uploadNewAlbumS3() {\n    if (!this.state.newFiles ) {\n      alert(\"button not active\");\n      return;\n    }\n    if (!this.state.albumTitleInput) {\n      alert('No album title');\n      return;\n    }\n\n    let config = {\n        bucketName: 'tlsshootspics',\n        dirName: this.state.albumTitleInput,\n        region: 'us-east-1',\n        accessKeyId: awsKey.access,\n        secretAccessKey: awsKey.secret,\n        s3Url: 'https://tlsshootspics.s3.amazonaws.com'\n    }\n\n//     const config = {\n//     bucketName: 'myBucket',\n//     dirName: 'photos', /* optional */\n//     region: 'eu-west-1',\n//     accessKeyId: 'ANEIFNENI4324N2NIEXAMPLE',\n//     secretAccessKey: 'cms21uMxçduyUxYjeg20+DEkgDxe6veFosBT7eUgEXAMPLE',\n//     s3Url: 'https://my-s3-url.com/', /* optional */\n// }\n\n\n    // console.log('config.accessKeyId', config.accessKeyId)\n    // console.log('config.accessKeyId', config.secret)\n    // debugger\n    // console.log('S3', S3)\n    const S3Client = new S3(config);\n    // console.log('S3Client', S3Client)\n    let imgLinks = [];\n\n\n    if( window.confirm('Are you sure you want to upload this album?')) {\n      this.uploading();\n      for (var i = 0; i < this.state.files.length; i++) {\n        S3Client.uploadFile(this.state.files[i], this.state.files[i].name.split(\".\")[0])\n        .then(data => {\n          imgLinks.push(data.location)\n          let counter = this.state.counter\n          this.setState({\n            counter: counter += 1\n          })\n\n          if (this.state.counter === this.state.files.length) {\n            this.setState({\n              awsFiles: imgLinks,\n            })\n            // this.setActiveGallery({images: imgLinks, title:this.state.galleryTitle})\n            // API REQUEST TO SAVE AND UPDATE ALBUM\n            this.uploadNewAlbumServer()\n          }\n          // if (i === this.state.files.length - 1) {\n          // }\n          this.uploading()\n        })\n        .catch(err => {\n          console.log('error uploading', err)\n        })\n      }\n    }\n  }\n\n  uploadNewAlbumServer() {\n    console.log('======here LLL======', this.state.awsFiles)\n    let location = this.state.awsFiles[0].split('/')[3]\n    fetch(`https://enigmatic-lake-22259.herokuapp.com/albums`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        album: {\n          title: this.state.albumTitleInput,\n          cover: 0,\n          awsLocation: location,\n          images: this.state.awsFiles\n        }\n      })\n    })\n    .then(response => response.json())\n    .then((responseJson) => {\n      let _this = this\n      this.getAlbums()\n      setTimeout(function(){\n        _this.selectAlbum(_this.state.albums.length - 1);\n      }, 2000);\n      console.log('=====API GET setCover=====', responseJson)\n    })\n    .catch(error => {\n      console.log('=====API error setCover=====', error)\n    })\n  }\n\n  deleteAlbumS3() {\n    if (this.state.newFiles || !this.state.activeAlbum.album) {\n      alert(\"button not active\");\n      return;\n    }\n    if(window.confirm('Are you sure you want to delete this album?')) {\n      this.uploading();\n      let config = {\n          bucketName: 'tlsshootspics',\n          dirName: this.state.activeAlbum.album.awsLocation,\n          accessKeyId: awsKey.access,\n          secretAccessKey: awsKey.secret,\n      }\n      const S3Client = new S3(config);\n\n      for (var i = 0; i < this.state.activeAlbum.images.length; i++) {\n        let filename = this.state.activeAlbum.images[i].url.split(\"/\")[4]\n        let num = i\n        S3Client.deleteFile(filename)\n        .then(response => {\n\n        })\n        .catch(err => console.error(err))\n\n\n        fetch(`https://enigmatic-lake-22259.herokuapp.com/images/${this.state.activeAlbum.images[i].id}`, {\n          method: 'DELETE',\n          mode: 'cors',\n          headers: {\n            'Access-Control-Allow-Origin': '*',\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n          }\n        })\n        .then(response => response.json())\n        .then((responseJson) => {\n          let counter = this.state.counter\n          this.setState({\n            counter: counter += 1\n          })\n          this.uploading()\n          if (this.state.activeAlbum.images.length - 1 == num) {\n            console.log('this here', this.state)\n            this.deleteAlbumServer();\n          }\n          console.log('=====API DELETE', responseJson)\n        })\n        .catch(error => { console.log('=====API error', error) })\n      }\n    }\n  }\n\n  deleteAlbumServer() {\n    let _this = this\n    fetch(`https://enigmatic-lake-22259.herokuapp.com/albums/${this.state.activeAlbum.album.id}`, {\n      method: 'DELETE',\n      mode: 'cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(response => response.json())\n    .then((responseJson) => {\n      _this.clearEditor();\n      _this.getAlbums()\n    })\n    .catch(error => { console.log('=====API error', error) })\n  }\n\n  confirmAction(action) {\n\n  }\n\n  clearEditor() {\n    this.setState({\n      activeAlbumIdx: 0,\n      activeAlbum: {},\n      albumTitle: 'No Album Selected',\n      albumTitleInput: '',\n      totalNumberOfImages: 0,\n      files: [],\n      newFiles: false\n    })\n  }\n\n  uploading() {\n    if (this.state.newFiles) {\n      if (this.state.uploading && this.state.counter === this.state.files.length) {\n        this.setState({\n          uploading: false,\n          counter: 0\n        })\n      } else {\n        this.setState({\n          uploading: true\n        })\n      }\n    } else {\n      if (this.state.uploading && this.state.counter === this.state.activeAlbum.images.length) {\n        this.setState({\n          uploading: false,\n          counter: 0\n        })\n      } else {\n        this.setState({\n          uploading: true\n        })\n      }\n    }\n  }\n\n  renderAlbums() {\n    let albumsArr = []\n    let albums = this.state.albums\n    console.log('albums', albums)\n    for (var i = 0; i < albums.length; i++) {\n\n      albumsArr.push(\n        <div className=\"albumIcon\" onClick={this.selectAlbum.bind(this, i)}>\n          <ImageLoader\n            src={ albums[i].images[albums[i].album.cover].url }\n            style={{\n              width: 150,\n              height: 150,\n              margin: 5\n            }}\n            loading={() =>\n              <Loader\n                type=\"RevolvingDot\"\n                color=\"#616161\"\n                height=\"30\"\n                width=\"30\"\n                />\n            }\n            error={() => <div>Loading...</div>}\n            />\n          <p className=\"albumIconTitle\">{albums[i].album.title}</p>\n        </div>\n      )\n    }\n    return albumsArr\n  }\n\n  renderActiveAlbumFiles() {\n    let filesArr = []\n    let album = this.state.activeAlbum\n    if (Object.keys(album).length !== 0 ) {\n      filesArr.push(\n        <div className=\"fileItem\">\n          <ImageLoader\n            src={album.images[album.album.cover].url}\n            style={{\n              width: 50,\n              height: 50,\n            }}\n            loading={() =>\n              <Loader\n                type=\"RevolvingDot\"\n                color=\"#616161\"\n                height=\"30\"\n                width=\"30\"\n                />\n            }\n            error={() => <div>Loading...</div>}\n            />\n          <p>\n            {\n              album.images[album.album.cover].url.split('/')[album.images[album.album.cover].url.split('/').length - 1]\n            }\n          </p>\n        </div>\n      )\n\n      for (var i = 0; i < album.images.length; i++) {\n        if (i !== album.album.cover) {\n          filesArr.push(\n            <div className=\"fileItem\" onClick={this.selectImage.bind(this)}>\n              <ImageLoader\n                src={album.images[i].url}\n                style={{\n                  width: 50,\n                  height: 50,\n                }}\n                loading={() =>\n                  <Loader\n                    type=\"RevolvingDot\"\n                    color=\"#616161\"\n                    height=\"30\"\n                    width=\"30\"\n                    />\n                }\n                error={() => <div>Loading...</div>}\n              />\n              <p>\n                {\n                  album.images[i].url.split('/')[album.images[i].url.split('/').length - 1]\n                }\n              </p>\n              <div className=\"setCoverBtn\" onClick={this.updateAlbumCover.bind(this, album.images[i])}><span>set as cover</span></div>\n            </div>\n          )\n        }\n      }\n    } else if (this.state.files.length !== 0) {\n      for (var int = 0; int < this.state.files.length; int++) {\n        filesArr.push(\n          <div className=\"fileItem\">\n            <p> { this.state.files[int].name } </p>\n          </div>\n        )\n      }\n    }\n    return filesArr\n  }\n\n\n  render() {\n    if (this.state.logged) {\n      return (\n        <div className=\"container\">\n          <h1>Admin</h1>\n\n\n\n          <div className=\"bodyContainer\">\n\n            <div className=\"rightContainer\">\n\n              <div className=\"actionsContainer\">\n                <h2>Actions</h2>\n                <div className=\"actionsWrapper\">\n                  <div className=\"btn\"><p>upload album</p>\n                  <input className=\"fileInput\" type='file' name=\"New Gallery\" onChange={this.selectNewAlbum.bind(this)} multiple=\"\" directory=\"\" webkitdirectory=\"\" mozdirectory=\"\" />\n                </div>\n                <div className=\"btn\" onClick={this.updateAlbumTitle.bind(this)}><p>update title</p></div>\n                <div className=\"btn\" onClick={this.clearEditor.bind(this)}><p>clear editor</p></div>\n                <div className=\"btn\" onClick={this.uploadNewAlbumS3.bind(this)}><p>publish album</p></div>\n                <div className=\"btn\" onClick={this.deleteAlbumS3.bind(this)}><p>delete album</p></div>\n              </div>\n            </div>\n\n              <div className=\"editorContainer\">\n\n                <h2>Album Editor - <strong style={{fontWeight: '900', color: '#d4ae93'}}>{ this.state.albumTitle }</strong> </h2>\n                <input onChange={this.handleChangeText.bind(this)} value={this.state.albumTitleInput} placeholder=\"Update Album Title\" type=\"text\" className=\"titleInput\" />\n\n                <div className=\"filesContainer\">\n                  { this.renderActiveAlbumFiles() }\n                </div>\n              </div>\n            </div>\n\n            <div className=\"albumsContainer\">\n              <h2>Stored Albums</h2>\n              <div className=\"albumIcons\">\n                { this.renderAlbums() }\n              </div>\n            </div>\n          </div>\n          {\n            this.state.uploading ?\n            (<div style={{\n              color: '#fff',\n              fontSize: 42,\n              position: 'fixed',\n              top: 0,\n              bottom: 0,\n              left: 0,\n              right: 0,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              background: '#00000090'}}>\n              {this.state.newFiles ? \"uploaded\" : \"deleted\"}: {this.state.counter}/{this.state.newFiles ? this.state.files.length : this.state.activeAlbum.images.length }\n            </div>) :\n            (<div />)\n          }\n        </div>\n      );\n\n    } else {\n      return (\n        <div className=\"container\">\n          <div className=\"editorContainer\" style={{width: '95%'}}>\n\n            <h2>Admin Login</h2>\n            <input value={this.state.adminPass} type=\"password\" onChange={this.handleAdminChangeText.bind(this)} placeholder=\"Enter Password\" className=\"titleInput\" />\n\n            <div className=\"btn\" style={{width: '20%'}} onClick={this.verifyUser.bind(this)}><p>enter</p></div>\n          </div>\n        </div>\n      )\n    }\n  }\n\n}\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}